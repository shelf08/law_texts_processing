# Архитектура системы

## Общая структура

Система состоит из следующих основных модулей:

### 1. Модуль онтологии (`src/ontology/`)

- **ontology_manager.py**: Управление онтологией через rdflib
  - Добавление сущностей (законы, статьи, главы, термины)
  - Установка связей между сущностями
  - Выполнение SPARQL-запросов
  - Сохранение/загрузка онтологии

- **graphdb_connector.py**: Подключение к GraphDB
  - Выполнение SPARQL-запросов через GraphDB
  - Загрузка данных в GraphDB

### 2. Модуль обработки текста (`src/text_processing/`)

- **document_parser.py**: Парсинг документов
  - Поддержка форматов: XML, HTML, PDF, TXT
  - Извлечение структурных элементов (главы, статьи)
  - Извлечение метаданных

### 3. NLP модуль (`src/nlp/`)

- **text_analyzer.py**: Анализ текста
  - Токенизация и лемматизация
  - Извлечение именованных сущностей
  - Извлечение ссылок на другие акты
  - Поиск ключевых терминов

### 4. Веб-интерфейс (`src/web/`)

- **app.py**: Flask приложение
  - REST API для поиска и навигации
  - Загрузка и обработка документов
  - Визуализация графа связей

### 5. Модуль интеграции (`src/integration/`)

- **document_processor.py**: Полная обработка документа
  - Координация всех модулей
  - Добавление данных в онтологию

## Поток обработки документа

1. **Загрузка документа** → `document_parser.parse()`
2. **Парсинг структуры** → извлечение глав и статей
3. **NLP анализ** → извлечение сущностей, терминов, ссылок
4. **Добавление в онтологию** → создание RDF триплетов
5. **Сохранение** → запись в OWL файл или GraphDB

## Поток поиска

1. **Запрос пользователя** → веб-интерфейс
2. **SPARQL запрос** → поиск в онтологии
3. **Форматирование результатов** → JSON ответ
4. **Отображение** → веб-интерфейс

## Онтология

Онтология определена в `ontology/legal_ontology.owl` и включает:

### Классы:
- Law (Закон)
- Chapter (Глава)
- Article (Статья)
- Term (Термин)
- Reference (Ссылка)
- LegalInstitution (Правовой институт)

### Свойства:
- Иерархические: `containsChapter`, `containsArticle`, `belongsToLaw`
- Ссылочные: `references`, `referencesLaw`
- Семантические: `hasSynonym`, `belongsToInstitution`, `definesTerm`, `usesTerm`
- Данные: `hasNumber`, `hasTitle`, `hasDate`, `hasText`

